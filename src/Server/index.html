<html>
<head>
<script>

P1 = [11.811, 10.6934, 0];
P2 = [6.4262, 0.2159, -0.1016];
P3 = [1.8796, 9.2725875, 0.1016];

ancors = [P1, P2, P3];

lower_floor = [
		[
			[0.0, 0.0],
			[0.0, 1.3462],
		],
		[
			[0.0, 1.3462],
			[-0.5334, 1.3462],
		],
		[
			[-0.5334, 1.3462],
			[-0.5334, 3.0226],
		],
		[
			[-0.5334, 3.0226],
			[0.0, 3.0226],
		],
		[
			[0.0, 3.0226],
			[0.0, 14.732],
		],
		[
			[0.0, 14.732],
			[0.4826, 14.732],
		],
		[
			[0.4826, 14.732],
			[0.4826, 14.6304],
		],
		[
			[0.4826, 14.6304],
			[0.1016, 14.6304],
		],
		[
			[0.1016, 14.6304],
			[0.1016, 8.7376],
		],
		[
			[0.1016, 8.7376],
			[4.5212, 8.7376],
		],
		[
			[4.5212, 8.7376],
			[4.5212, 8.636],
		],
		[
			[4.5212, 8.636],
			[3.302, 8.636],
		],
		[
			[3.302, 8.636],
			[3.302, 7.0358],
		],
		[
			[3.302, 7.0358],
			[4.7117, 7.0358],
		],
		[
			[4.7117, 7.0358],
			[4.7117, 6.9342],
		],
		[
			[4.7117, 6.9342],
			[3.9878, 6.9342],
		],
		[
			[3.9878, 6.9342],
			[3.9878, 6.858],
		],
		[
			[3.9878, 6.858],
			[3.8862, 6.858],
		],
		[
			[3.8862, 6.858],
			[3.8862, 6.9342],
		],
		[
			[3.8862, 6.9342],
			[3.302, 6.9342],
		],
		[
			[3.302, 6.9342],
			[3.302, 5.969],
		],
		[
			[3.302, 5.969],
			[3.8862, 5.969],
		],
		[
			[3.8862, 5.969],
			[3.8862, 6.096],
		],
		[
			[3.8862, 6.096],
			[3.9878, 6.096],
		],
		[
			[3.9878, 6.096],
			[3.9878, 5.969],
		],
		[
			[3.9878, 5.969],
			[4.7117, 5.969],
		],
		[
			[4.7117, 5.969],
			[4.7117, 5.8674],
		],
		[
			[4.7117, 5.8674],
			[3.302, 5.8674],
		],
		[
			[3.302, 5.8674],
			[3.302, 5.6515],
		],
		[
			[3.302, 5.6515],
			[3.2004, 5.6515],
		],
		[
			[3.2004, 5.6515],
			[3.2004, 8.636],
		],
		[
			[3.2004, 8.636],
			[0.1016, 8.636],
		],
		[
			[0.1016, 8.636],
			[0.1016, 4.3942],
		],
		[
			[0.1016, 4.3942],
			[1.1557, 4.3942],
		],
		[
			[1.1557, 4.3942],
			[1.1557, 4.2926],
		],
		[
			[1.1557, 4.2926],
			[0.1524, 4.2926],
		],
		[
			[0.1524, 4.2926],
			[0.1524, 0.1524],
		],
		[
			[0.1524, 0.1524],
			[5.6880125, 0.1524],
		],
		[
			[5.6880125, 0.1524],
			[6.2468125, -0.4064],
		],
		[
			[6.2468125, -0.4064],
			[8.366125, -0.4064],
		],
		[
			[8.366125, -0.4064],
			[8.8646, 0.111125],
		],
		[
			[8.8646, 0.111125],
			[8.8646, 0.6604],
		],
		[
			[8.8646, 0.6604],
			[8.9662, 0.6604],
		],
		[
			[8.9662, 0.6604],
			[8.9662, 0.1016],
		],
		[
			[8.9662, 0.1016],
			[11.8364, 0.1016],
		],
		[
			[11.8364, 0.1016],
			[11.8364, 4.2418],
		],
		[
			[11.8364, 4.2418],
			[9.652, 4.2418],
		],
		[
			[9.652, 4.2418],
			[9.652, 3.4798],
		],
		[
			[9.652, 3.4798],
			[9.5504, 3.4798],
		],
		[
			[9.5504, 3.4798],
			[9.5504, 4.3942],
		],
		[
			[9.5504, 4.3942],
			[11.8919625, 4.3942],
		],
		[
			[11.8919625, 4.3942],
			[12.4714, 4.9831625],
		],
		[
			[12.4714, 4.9831625],
			[12.4714, 6.83895],
		],
		[
			[12.4714, 6.83895],
			[11.8364, 7.47395],
		],
		[
			[11.8364, 7.47395],
			[11.8364, 10.7188],
		],
		[
			[11.8364, 10.7188],
			[11.1125, 10.7188],
		],
		[
			[11.1125, 10.7188],
			[10.760075, 11.3284],
		],
		[
			[10.760075, 11.3284],
			[9.0884375, 11.3284],
		],
		[
			[9.0884375, 11.3284],
			[8.7360125, 10.7188],
		],
		[
			[8.7360125, 10.7188],
			[8.1534, 10.7188],
		],
		[
			[8.1534, 10.7188],
			[8.1534, 9.5631],
		],
		[
			[8.1534, 9.5631],
			[8.0518, 9.5631],
		],
		[
			[8.0518, 9.5631],
			[8.0518, 9.652],
		],
		[
			[8.0518, 9.652],
			[7.747, 9.652],
		],
		[
			[7.747, 9.652],
			[7.747, 9.7536],
		],
		[
			[7.747, 9.7536],
			[8.0518, 9.7536],
		],
		[
			[8.0518, 9.7536],
			[8.0518, 10.8204],
		],
		[
			[8.0518, 10.8204],
			[8.677275, 10.8204],
		],
		[
			[8.677275, 10.8204],
			[9.0297, 11.43],
		],
		[
			[9.0297, 11.43],
			[10.8188125, 11.43],
		],
		[
			[10.8188125, 11.43],
			[11.1712375, 10.8204],
		],
		[
			[11.1712375, 10.8204],
			[11.938, 10.8204],
		],
		[
			[11.938, 10.8204],
			[11.938, 7.5168125],
		],
		[
			[11.938, 7.5168125],
			[12.573, 6.8818125],
		],
		[
			[12.573, 6.8818125],
			[12.573, 4.9736375],
		],
		[
			[12.573, 4.9736375],
			[11.938, 4.3386375],
		],
		[
			[11.938, 4.3386375],
			[11.938, 0.0],
		],
		[
			[11.938, 0.0],
			[8.9154, 0.0],
		],
		[
			[8.9154, 0.0],
			[8.4074, -0.508],
		],
		[
			[8.4074, -0.508],
			[6.20395, -0.508],
		],
		[
			[6.20395, -0.508],
			[5.69595, 0.0],
		],
		[
			[5.69595, 0.0],
			[0.0, 0.0],
		],
		[
			[5.3594, 14.732],
			[6.4262, 14.732],
		],
		[
			[6.4262, 14.732],
			[6.4262, 9.7536],
		],
		[
			[6.4262, 9.7536],
			[6.8326, 9.7536],
		],
		[
			[6.8326, 9.7536],
			[6.8326, 9.652],
		],
		[
			[6.8326, 9.652],
			[6.4262, 9.652],
		],
		[
			[6.4262, 9.652],
			[6.4262, 8.636],
		],
		[
			[6.4262, 8.636],
			[5.6642, 8.636],
		],
		[
			[5.6642, 8.636],
			[5.6642, 6.9342],
		],
		[
			[5.6642, 6.9342],
			[5.4737, 6.9342],
		],
		[
			[5.4737, 6.9342],
			[5.4737, 7.0358],
		],
		[
			[5.4737, 7.0358],
			[5.5626, 7.0358],
		],
		[
			[5.5626, 7.0358],
			[5.5626, 8.636],
		],
		[
			[5.5626, 8.636],
			[5.4356, 8.636],
		],
		[
			[5.4356, 8.636],
			[5.4356, 8.7376],
		],
		[
			[5.4356, 8.7376],
			[6.3246, 8.7376],
		],
		[
			[6.3246, 8.7376],
			[6.3246, 14.6304],
		],
		[
			[6.3246, 14.6304],
			[5.3594, 14.6304],
		],
		[
			[5.3594, 14.6304],
			[5.3594, 14.732],
		],
		[
			[5.4737, 5.969],
			[5.6642, 5.969],
		],
		[
			[5.6642, 5.969],
			[5.6642, 4.2926],
		],
		[
			[5.6642, 4.2926],
			[2.6289, 4.2926],
		],
		[
			[2.6289, 4.2926],
			[2.6289, 4.3942],
		],
		[
			[2.6289, 4.3942],
			[3.2004, 4.3942],
		],
		[
			[3.2004, 4.3942],
			[3.2004, 5.0419],
		],
		[
			[3.2004, 5.0419],
			[3.302, 5.0419],
		],
		[
			[3.302, 5.0419],
			[3.302, 4.8768],
		],
		[
			[3.302, 4.8768],
			[3.7846, 4.8768],
		],
		[
			[3.7846, 4.8768],
			[3.7846, 4.445],
		],
		[
			[3.7846, 4.445],
			[5.5626, 4.445],
		],
		[
			[5.5626, 4.445],
			[5.5626, 5.8674],
		],
		[
			[5.5626, 5.8674],
			[5.4737, 5.8674],
		],
		[
			[5.4737, 5.8674],
			[5.4737, 5.969],
		],
		[
			[3.302, 4.7752],
			[3.683, 4.7752],
		],
		[
			[3.683, 4.7752],
			[3.683, 4.445],
		],
		[
			[3.683, 4.445],
			[3.302, 4.445],
		],
		[
			[3.302, 4.445],
			[3.302, 4.7752],
		],
		[
			[-0.4318, 2.921],
			[0.0, 2.921],
		],
		[
			[0.0, 2.921],
			[0.0, 1.4478],
		],
		[
			[0.0, 1.4478],
			[-0.4318, 1.4478],
		],
		[
			[-0.4318, 1.4478],
			[-0.4318, 2.921],
		],
		[
			[8.0518, 7.1247],
			[8.1534, 7.1247],
		],
		[
			[8.1534, 7.1247],
			[8.1534, 3.4798],
		],
		[
			[8.1534, 3.4798],
			[8.0518, 3.4798],
		],
		[
			[8.0518, 3.4798],
			[8.0518, 4.2418],
		],
		[
			[8.0518, 4.2418],
			[7.972425, 4.2418],
		],
		[
			[7.972425, 4.2418],
			[7.972425, 4.3434],
		],
		[
			[7.972425, 4.3434],
			[8.0518, 4.3434],
		],
		[
			[8.0518, 4.3434],
			[8.0518, 7.1247],
		]

];

upper_floor = [
		[
			[0,0],
			[11.938,0]
		],
		[
			[0,0],
			[0,12.2936]
		],
		[
			[11.938,0],
			[11.938,10.8204]
		],
		[
			[0,12.2936],
			[1.2446, 12.2936]
		],
		[
			[1.2446, 12.2936],
			[1.2446, 12.9286]
		],
		[
			[1.2446, 12.9286],
			[5.1308, 12.9286]
		],
		[
			[5.1308, 12.9286],
			[5.1308, 12.2936]
		],
		[
			[5.1308, 12.2936],
			[6.4262, 12.2936]
		],
		[
			[6.4262, 12.2936],
			[6.4262,9.7536]
		],
		[
			[6.4262,9.7536],
			[8.0518,9.7536]
		],
		[
			[8.0518,9.7536],
			[8.0518,10.8204]
		],
		[
			[8.0518,10.8204],
			[8.677275,10.8204]
		],
		[
			[8.677275,10.8204],
			[9.0297, 11.43]
		],
		[
			[9.0297, 11.43],
			[10.8188125, 11.43]
		],
		[
			[10.8188125, 11.43],
			[11.1712375, 10.8204]
		],
		[
			[11.1712375, 10.8204],
			[11.938, 10.8204]
		],
		[
			[5.0292, 12.827],
			[5.0292, 12.192],
		],
		[
			[5.0292, 12.192],
			[6.3246, 12.192],
		],
		[
			[6.3246, 12.192],
			[6.3246, 8.6883875],
		],
		[
			[6.3246, 8.6883875],
			[5.6118125, 7.9756],
		],
		[
			[5.6118125, 7.9756],
			[5.4054375, 7.9200375],
		],
		[
			[5.4054375, 7.9200375],
			[5.4308375, 7.8216125],
		],
		[
			[5.4308375, 7.8216125],
			[5.6657875, 7.8851125],
		],
		[
			[5.6657875, 7.8851125],
			[6.4262, 8.645525],
		],
		[
			[6.4262, 8.645525],
			[6.4262, 9.652],
		],
		[
			[6.4262, 9.652],
			[8.0518, 9.652],
		],
		[
			[8.0518, 9.652],
			[8.0518, 6.731],
		],
		[
			[8.0518, 6.731],
			[8.3312, 6.731],
		],
		[
			[8.3312, 6.731],
			[8.3312, 6.8326],
		],
		[
			[8.3312, 6.8326],
			[8.1534, 6.8326],
		],
		[
			[8.1534, 6.8326],
			[8.1534, 10.7188],
		],
		[
			[8.1534, 10.7188],
			[8.7360125, 10.7188],
		],
		[
			[8.7360125, 10.7188],
			[9.0884375, 11.3284],
		],
		[
			[9.0884375, 11.3284],
			[10.760075, 11.3284],
		],
		[
			[10.760075, 11.3284],
			[11.1125, 10.7188],
		],
		[
			[11.8364, 6.8326],
			[11.3284, 6.8326],
		],
		[
			[11.3284, 6.8326],
			[11.3284, 6.731],
		],
		[
			[11.3284, 6.731],
			[11.8364, 6.731],
		],
		[
			[11.8364, 6.731],
			[11.8364, 5.5626],
		],
		[
			[11.8364, 5.5626],
			[10.033, 5.5626],
		],
		[
			[10.033, 5.5626],
			[10.033, 6.731],
		],
		[
			[10.033, 6.731],
			[10.5664, 6.731],
		],
		[
			[10.5664, 6.731],
			[10.5664, 6.8326],
		],
		[
			[10.5664, 6.8326],
			[9.0932, 6.8326],
		],
		[
			[9.0932, 6.8326],
			[9.0932, 6.731],
		],
		[
			[9.0932, 6.731],
			[9.2202, 6.731],
		],
		[
			[9.2202, 6.731],
			[9.2202, 6.5786],
		],
		[
			[9.2202, 6.5786],
			[9.3218, 6.5786],
		],
		[
			[9.3218, 6.5786],
			[9.3218, 6.731],
		],
		[
			[9.3218, 6.731],
			[9.9314, 6.731],
		],
		[
			[9.9314, 6.731],
			[9.9314, 5.5626],
		],
		[
			[9.9314, 5.5626],
			[9.3218, 5.5626],
		],
		[
			[9.3218, 5.5626],
			[9.3218, 5.8166],
		],
		[
			[9.3218, 5.8166],
			[9.2202, 5.8166],
		],
		[
			[9.2202, 5.8166],
			[9.2202, 5.3975],
		],
		[
			[9.2202, 5.3975],
			[9.3218, 5.3975],
		],
		[
			[9.3218, 5.3975],
			[9.3218, 5.461],
		],
		[
			[9.3218, 5.461],
			[11.8364, 5.461],
		],
		[
			[11.8364, 5.461],
			[11.8364, 3.937],
		],
		[
			[11.8364, 3.937],
			[9.3218, 3.937],
		],
		[
			[9.3218, 3.937],
			[9.3218, 4.6355],
		],
		[
			[9.3218, 4.6355],
			[9.2202, 4.6355],
		],
		[
			[9.2202, 4.6355],
			[9.2202, 3.1242],
		],
		[
			[9.2202, 3.1242],
			[9.0932, 3.1242],
		],
		[
			[9.0932, 3.1242],
			[9.0932, 3.0226],
		],
		[
			[9.0932, 3.0226],
			[9.6774, 3.0226],
		],
		[
			[9.6774, 3.0226],
			[9.6774, 3.1242],
		],
		[
			[9.6774, 3.1242],
			[9.3218, 3.1242],
		],
		[
			[9.3218, 3.1242],
			[9.3218, 3.7846],
		],
		[
			[9.3218, 3.7846],
			[11.8364, 3.7846],
		],
		[
			[11.8364, 3.7846],
			[11.8364, 3.1242],
		],
		[
			[11.8364, 3.1242],
			[11.5062, 3.1242],
		],
		[
			[11.5062, 3.1242],
			[11.5062, 3.0226],
		],
		[
			[11.5062, 3.0226],
			[11.8364, 3.0226],
		],
		[
			[11.8364, 3.0226],
			[11.8364, 0.1016],
		],
		[
			[11.8364, 0.1016],
			[8.2296, 0.1016],
		],
		[
			[8.2296, 0.1016],
			[8.2296, 3.0226],
		],
		[
			[8.2296, 3.0226],
			[8.3312, 3.0226],
		],
		[
			[8.3312, 3.0226],
			[8.3312, 3.1242],
		],
		[
			[8.3312, 3.1242],
			[8.128, 3.1242],
		],
		[
			[8.128, 3.1242],
			[8.128, 0.1524],
		],
		[
			[4.191, 4.3942],
			[4.2418, 4.2926],
		],
		[
			[4.2418, 4.2926],
			[5.6388, 2.8956],
		],
		[
			[5.6388, 2.8956],
			[5.6388, 0.1524],
		],

		[
			[0.1524, 0.1524],
			[0.1524, 4.2926],
		],
		[
			[0.1524, 4.2926],
			[4.2418, 4.2926],
		],

		[
			[4.191, 4.3942],
			[3.2512, 4.3942],
		],
		[
			[3.2512, 4.3942],
			[3.2512, 4.699],
		],
		[
			[3.2512, 4.699],
			[4.191, 4.699],
		],
		[
			[4.191, 4.699],
			[4.191, 4.3942],
		],

		[
			[8.0518, 6.731],
			[8.0518, 4.2418],
		],
		[
			[8.0518, 4.2418],
			[8.1534, 4.2418],
		],
		[
			[8.1534, 4.2418],
			[8.1534, 6.731],
		],

		[
			[5.588, 7.864475],
			[5.588, 4.918075],
		],
		[
			[5.588, 4.918075],
			[6.232525, 4.2418],
		],
		[
			[6.232525, 4.2418],
			[7.0866, 4.2418],
		],
		[
			[7.0866, 4.2418],
			[7.0866, 4.3434],
		],
		[
			[7.0866, 4.3434],
			[6.2738, 4.3434],
		],
		[
			[6.2738, 4.3434],
			[5.6896, 4.9276],
		],
		[
			[5.6896, 4.9276],
			[5.6896, 7.908925],
		],

		[
			[1.8796, 9.271],
			[1.3716, 8.763],
		],
		[
			[1.3716, 8.763],
			[1.3716, 8.5344],
		],
		[
			[1.3716, 8.5344],
			[1.27, 8.5344],
		],
		[
			[1.27, 8.5344],
			[1.27, 8.8058625],
		],
		[
			[1.27, 8.8058625],
			[1.778, 9.3138625],
		],
		[
			[1.778, 9.3138625],
			[1.778, 12.827],
		],
		[
			[1.778, 12.827],
			[1.3462, 12.827],
		],
		[
			[1.3462, 12.827],
			[1.3462, 12.192],
		],
		[
			[1.3462, 12.192],
			[0.1016, 12.192],
		],
		[
			[0.1016, 12.192],
			[0.1016, 7.5184],
		],
		[
			[0.1016, 7.5184],
			[1.27, 7.5184],
		],
		[
			[1.27, 7.5184],
			[1.27, 7.7724],
		],
		[
			[1.27, 7.7724],
			[1.3716, 7.7724],
		],
		[
			[1.3716, 7.7724],
			[1.3716, 7.5184],
		],
		[
			[1.3716, 7.5184],
			[1.6764, 7.5184],
		],
		[
			[1.6764, 7.5184],
			[1.6764, 7.4168],
		],
		[
			[1.6764, 7.4168],
			[0.1016, 7.4168],
		],
		[
			[0.1016, 7.4168],
			[0.1016, 4.3942],
		],
		[
			[0.1016, 4.3942],
			[3.1496, 4.3942],
		],
		[
			[3.1496, 4.3942],
			[3.1496, 5.5245],
		],
		[
			[3.1496, 5.5245],
			[3.2512, 5.5245],
		],
		[
			[3.2512, 5.5245],
			[3.2512, 4.8006],
		],
		[
			[3.2512, 4.8006],
			[4.191, 4.8006],
		],
		[
			[4.191, 4.8006],
			[4.191, 6.35],
		],
		[
			[4.191, 6.35],
			[3.2512, 6.35],
		],
		[
			[3.2512, 6.35],
			[3.2512, 6.2738],
		],
		[
			[3.2512, 6.2738],
			[3.1496, 6.2738],
		],
		[
			[3.1496, 6.2738],
			[3.1496, 6.5659],
		],
		[
			[3.1496, 6.5659],
			[3.2512, 6.5659],
		],
		[
			[3.2512, 6.5659],
			[3.2512, 6.4516],
		],
		[
			[3.2512, 6.4516],
			[4.175125, 6.4516],
		],
		[
			[4.175125, 6.4516],
			[3.9163625, 7.4168],
		],
		[
			[3.9163625, 7.4168],
			[3.2512, 7.4168],
		],
		[
			[3.2512, 7.4168],
			[3.2512, 7.3279],
		],
		[
			[3.2512, 7.3279],
			[3.1496, 7.3279],
		],
		[
			[3.1496, 7.3279],
			[3.1496, 7.4168],
		],
		[
			[3.1496, 7.4168],
			[2.4384, 7.4168],
		],
		[
			[2.4384, 7.4168],
			[2.4384, 7.5184],
		],
		[
			[2.4384, 7.5184],
			[3.9068375, 7.5184],
		],
		[
			[3.9068375, 7.5184],
			[4.079875, 7.5644375],
		],
		[
			[4.079875, 7.5644375],
			[4.105275, 7.4676],
		],
		[
			[4.105275, 7.4676],
			[4.0147875, 7.4422],
		],
		[
			[4.0147875, 7.4422],
			[4.2926, 6.40715],
		],
		[
			[4.2926, 6.40715],
			[4.2926, 4.403725],
		],
		[
			[4.2926, 4.403725],
			[5.7404, 2.955925],
		],
		[
			[5.7404, 2.955925],
			[5.7404, 0.1524],
		],
		[
			[1.8796, 9.2725875],
			[1.8796, 12.827]
		],
		[
			[1.8796, 12.827],
			[5.0292, 12.827]
		],

		[
			[11.1125, 10.7188],
			[11.8364, 10.7188]
		],
		[
			[11.8364, 10.7188],
			[11.8364, 6.8326]
		],

		[
			[8.128, 0.1524],
			[0.1524, 0.1524]
		]

	]

scale = 40;

draw_ancors = function(ctx, ancors){

	for(i = 0; i < ancors.length; i++){
		ancor = ancors[i];

		ctx.beginPath();
		ctx.arc(ancor[0]*scale, -1*ancor[1]*scale, 5, 0, 2 * Math.PI, false);
		ctx.fillStyle = 'red';
		ctx.fill();
		ctx.closePath();

	}

}

draw_lines = function(ctx, lines){

	for(i = 0; i < lines.length; i++){
		line = lines[i];
		ctx.beginPath();
		ctx.moveTo(line[0][0]*scale, -1*line[0][1]*scale);
		ctx.lineTo(line[1][0]*scale, -1*line[1][1]*scale);
		ctx.stroke();
		ctx.closePath();
	}

}

tags = {};

draw = function(c, ctx){

	ctx.save();

	ctx.clearRect(0, 0, c.width, c.height);

	ctx.translate(0, c.height);
	ctx.translate(3*scale, -3*scale);

	ctx.translate(14*scale, 0);
	draw_lines(ctx, upper_floor);
	ctx.translate(-14*scale, 0);
	draw_lines(ctx, lower_floor);

	draw_ancors(ctx, ancors);
	ctx.translate(14*scale, 0);
	draw_ancors(ctx, ancors);
	ctx.translate(-14*scale, 0);

	for(var key in tags) {
		if(tags.hasOwnProperty(key)){

			pts = tags[key];

			color = 'blue';

			if(key == "CAFE"){
				color = 'blue';
			} else if(key == "1EAF"){
				color = 'green';
			} else {
				color = 'yellow';
			}

			for(i = 0; i < pts.length; i++){

				pt = pts[i];

				pt_floor = "downstairs";
				if(pt[2] > -3.3) pt_floor = "upstairs";

				if(pt_floor == "upstairs")
					ctx.translate(14*scale, 0);

				ctx.beginPath();
				ctx.arc(pt[0]*scale, -1*pt[1]*scale, 5, 0, 2 * Math.PI, false);
				if(i == pts.length-1)
					ctx.fillStyle = "dark"+color;
				else
					ctx.fillStyle = "light"+color;
				ctx.fill();
				ctx.closePath();

				if(pt_floor == "upstairs")
					ctx.translate(-14*scale, 0);

			}

		}
	}

	ctx.beginPath();
	ctx.arc(0, 50, 5, 0, 2 * Math.PI, false);
	ctx.fillStyle = "darkblue";
	ctx.fill();
	ctx.closePath();

	ctx.font = "20px Arial";
	ctx.fillText("Fiona",20,60);

	ctx.beginPath();
	ctx.arc(300, 50, 5, 0, 2 * Math.PI, false);
	ctx.fillStyle = "darkgreen";
	ctx.fill();
	ctx.closePath();

	ctx.font = "20px Arial";
	ctx.fillText("Jasper",320,60);

	ctx.restore();

}

window.onload = function(e){ 

	var c = document.getElementById("map");
	var ctx = c.getContext("2d");

	var host = "ws://192.168.0.12:9090/ws";
	var socket = new WebSocket(host);

	draw(c, ctx);

	socket.onmessage = function(msg){

		console.log(msg.data);
		str_pt = msg.data.split(",");
		pt = [parseFloat(str_pt[0]), parseFloat(str_pt[1]), parseFloat(str_pt[2])];
		address = str_pt[3]
		console.log(pt);

		if(!(address in tags)){
			tags[address] = [];
		}

		pts = tags[address];
		pts.push(pt);

		if(pts.length > 10){
			pts.shift();
		}

		draw(c, ctx);

	}

	socket.onopen = function(evt) { console.log("Connection open ..."); };
	socket.onclose = function(evt) { console.log("Connection closed."); };

}
</script>
</head>
<body>
<canvas id="map" width="1280" height="720"></canvas>
</body>
</html>
